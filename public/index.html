<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="–î–æ–¥–∞—Ç–æ–∫ –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∫–∞—Ä—Ç –ª–æ—è–ª—å–Ω–æ—Å—Ç—ñ">
    <meta name="theme-color" content="#667eea">
    <title>–ö–∞—Ä—Ç–∏ –õ–æ—è–ª—å–Ω–æ—Å—Ç—ñ</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="/logo-disCard.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/logo-disCard.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/logo-disCard.png">
    <link rel="mask-icon" href="/logo-disCard.png" color="#10b981">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="/style.css">
    
    <!-- Local Libraries -->
    <script src="/libs/quagga.min.js"></script>
    <script src="/libs/jsqr.min.js"></script>
    <script src="https://unpkg.com/qrcode@1.5.3/build/qrcode.min.js"></script>
</head>
<body>
    <div id="app">
        <!-- Loading Screen -->
        <div id="loading-screen" class="loading-screen">
            <img src="/logo-disCard.png" alt="disCard" class="loading-logo">
            <div class="spinner"></div>
            <p data-translate="common.loading">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>
        </div>

        <!-- Navigation -->
        <nav id="navbar" class="navbar" style="display: none;">
            <div class="nav-brand">
                <img src="/logo-disCard.png" alt="disCard" class="nav-logo">
                <h1 data-translate="app.title">üí≥ –ö–∞—Ä—Ç–∏ –õ–æ—è–ª—å–Ω–æ—Å—Ç—ñ</h1>
            </div>
            <div class="nav-actions">
                <button id="language-toggle" class="btn-icon" title="Switch Language / –ó–º—ñ–Ω–∏—Ç–∏ –º–æ–≤—É">
                    üåê
                </button>
                <button id="theme-toggle" class="btn-icon" title="–ü–µ—Ä–µ–º–∫–Ω—É—Ç–∏ —Ç–µ–º—É">
                    üåô
                </button>
                <button id="logout-btn" class="btn-icon" title="–í–∏–π—Ç–∏">
                    üö™
                </button>
            </div>
        </nav>

        <!-- Main Tabs Navigation -->
        <div id="main-tabs" class="main-tabs" style="display: none;">
            <button class="tab-btn active" data-tab="cards">
                <span class="tab-icon">üí≥</span>
                <span data-translate="tabs.cards">–ö–∞—Ä—Ç–∏</span>
            </button>
            <button class="tab-btn" data-tab="shopping">
                <span class="tab-icon">üõí</span>
                <span data-translate="tabs.shopping">–ü–æ–∫—É–ø–∫–∏</span>
            </button>
            <button class="tab-btn" data-tab="friends">
                <span class="tab-icon">üë•</span>
                <span data-translate="tabs.friends">–î—Ä—É–∑—ñ</span>
            </button>
            <button class="tab-btn" data-tab="profile">
                <span class="tab-icon">üë§</span>
                <span data-translate="tabs.profile">–ü—Ä–æ—Ñ—ñ–ª—å</span>
            </button>
        </div>

        <!-- Login Page -->
        <div id="login-page" class="page" style="display: none;">
            <div class="auth-container">
                <div class="auth-card">
                    <div class="auth-logo">
                        <img src="/logo-disCard.png" alt="disCard" class="auth-logo-img">
                    </div>
                    <h2 data-translate="login.title">–í—Ö—ñ–¥ –¥–æ —Å–∏—Å—Ç–µ–º–∏</h2>
                    <form id="login-form">
                        <div class="form-group">
                            <label for="login-email" data-translate="common.email">Email</label>
                            <input type="email" id="login-email" required>
                        </div>
                        <div class="form-group">
                            <label for="login-password" data-translate="common.password">–ü–∞—Ä–æ–ª—å</label>
                            <input type="password" id="login-password" required>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-container">
                                <input type="checkbox" id="remember-me">
                                <span class="checkmark"></span>
                                <span data-translate="login.remember_me">–ó–∞–ø–∞–º'—è—Ç–∞—Ç–∏ –º–µ–Ω–µ</span>
                            </label>
                        </div>
                        <button type="submit" class="btn btn-primary" data-translate="login.submit">–£–≤—ñ–π—Ç–∏</button>
                    </form>
                    <div class="auth-switch">
                        <p><span data-translate="login.no_account">–ù–µ–º–∞—î –∞–∫–∞—É–Ω—Ç—É?</span> <a href="#" id="show-register" data-translate="login.register_link">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</a></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Register Page -->
        <div id="register-page" class="page" style="display: none;">
            <div class="auth-container">
                <div class="auth-card">
                    <div class="auth-logo">
                        <img src="/logo-disCard.png" alt="disCard" class="auth-logo-img">
                    </div>
                    <h2 data-translate="register.title">–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</h2>
                    <form id="register-form">
                        <div class="form-group">
                            <label for="register-email" data-translate="common.email">Email</label>
                            <input type="email" id="register-email" required>
                        </div>
                        <div class="form-group">
                            <label for="register-password" data-translate="common.password">–ü–∞—Ä–æ–ª—å</label>
                            <input type="password" id="register-password" required minlength="6">
                        </div>
                        <div class="form-group">
                            <label for="register-confirm-password" data-translate="register.confirm_password">–ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ –ø–∞—Ä–æ–ª—å</label>
                            <input type="password" id="register-confirm-password" required>
                        </div>
                        <button type="submit" class="btn btn-primary" data-translate="register.submit">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</button>
                    </form>
                    <div class="auth-switch">
                        <p><span data-translate="register.have_account">–í–∂–µ —î –∞–∫–∞—É–Ω—Ç?</span> <a href="#" id="show-login" data-translate="register.login_link">–£–≤—ñ–π—Ç–∏</a></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Cards Page -->
        <div id="cards-page" class="page" style="display: none;">
            <div class="container">
                <div class="page-header">
                    <h2 data-translate="cards.my_cards">–ú–æ—ó –∫–∞—Ä—Ç–∏</h2>
                    <div class="header-actions">
                        <button id="security-settings-btn" class="btn btn-secondary">
                            üõ°Ô∏è <span data-translate="cards.security">–ë–µ–∑–ø–µ–∫–∞</span>
                        </button>
                        <button id="add-card-btn" class="btn btn-primary">
                            ‚ûï <span data-translate="cards.add_card">–î–æ–¥–∞—Ç–∏ –∫–∞—Ä—Ç–∫—É</span>
                        </button>
                    </div>
                </div>

                <!-- Search -->
                <div class="search-container">
                    <input type="text" id="search-cards" data-translate-placeholder="cards.search" placeholder="–ü–æ—à—É–∫ –∫–∞—Ä—Ç..." class="search-input">
                </div>

                <!-- Cards Grid -->
                <div id="cards-grid" class="cards-grid">
                    <!-- Cards will be dynamically loaded here -->
                </div>

                <!-- Empty State -->
                <div id="empty-state" class="empty-state" style="display: none;">
                    <div class="empty-icon">üí≥</div>
                    <h3 data-translate="cards.no_cards">–ù–µ–º–∞—î –∫–∞—Ä—Ç</h3>
                    <p data-translate="cards.add_first_card">–î–æ–¥–∞–π—Ç–µ —Å–≤–æ—é –ø–µ—Ä—à—É –∫–∞—Ä—Ç—É –ª–æ—è–ª—å–Ω–æ—Å—Ç—ñ</p>
                    <button class="btn btn-primary" id="add-card-btn-inline" data-translate="cards.add_card">–î–æ–¥–∞—Ç–∏ –∫–∞—Ä—Ç–∫—É</button>
                </div>
            </div>
        </div>

        <!-- Add Card Page -->
        <div id="add-card-page" class="page" style="display: none;">
            <div class="container">
                <div class="page-header">
                    <button id="back-to-cards" class="btn-back">‚Üê <span data-translate="common.back">–ù–∞–∑–∞–¥</span></button>
                    <h2 data-translate="add_card.title">–î–æ–¥–∞—Ç–∏ –∫–∞—Ä—Ç–∫—É</h2>
                </div>

                <form id="add-card-form">
                    <div class="form-group">
                        <label for="card-name" data-translate="add_card.name">–ù–∞–∑–≤–∞ –∫–∞—Ä—Ç–∫–∏</label>
                        <input type="text" id="card-name" required maxlength="100" 
                               data-translate-placeholder="add_card.name_placeholder" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: –ê–¢–ë, –°—ñ–ª—å–ø–æ, Rozetka">
                    </div>

                    <div class="form-group">
                        <label for="card-code" data-translate="add_card.code">–ù–æ–º–µ—Ä –∫–∞—Ä—Ç–∫–∏</label>
                        <div class="input-with-scanner">
                            <input type="text" id="card-code" required 
                                   data-translate-placeholder="add_card.code_placeholder" placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–æ–º–µ—Ä –∞–±–æ —Å–∫–∞–Ω—É–π—Ç–µ">
                            <button type="button" id="scan-barcode-btn" class="btn-scanner">
                                üì∑ <span data-translate="add_card.scan">–°–∫–∞–Ω—É–≤–∞—Ç–∏</span>
                            </button>
                        </div>
                        <small class="form-help">
                            üí° –ú–æ–∂–µ—Ç–µ –≤–≤–µ—Å—Ç–∏ –∫–æ–¥ –≤—Ä—É—á–Ω—É –∞–±–æ —Å–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏—Å—è —Å–∫–∞–Ω–µ—Ä–æ–º
                        </small>
                    </div>


                    <div class="form-actions">
                        <button type="button" id="cancel-add-card" class="btn btn-secondary" data-translate="common.cancel">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                        <button type="submit" class="btn btn-primary" data-translate="add_card.save">–ó–±–µ—Ä–µ–≥—Ç–∏ –∫–∞—Ä—Ç–∫—É</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Scanner Modal -->
        <div id="scanner-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 data-translate="scanner.title">–°–∫–∞–Ω—É–≤–∞–Ω–Ω—è –∫–æ–¥—É</h3>
                    <button id="close-scanner" class="btn-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="scanner-container">
                        <video id="scanner-video" autoplay playsinline></video>
                        <div id="scanner-overlay">
                            <div class="scan-frame"></div>
                        </div>
                    </div>
                    <div class="code-type-selector">
                        <label>
                            <input type="radio" name="code-type" value="barcode" checked>
                            <span data-translate="add_card.barcode">–®—Ç—Ä–∏—Ö-–∫–æ–¥</span>
                        </label>
                        <label>
                            <input type="radio" name="code-type" value="qr">
                            <span data-translate="add_card.qr_code">QR-–∫–æ–¥</span>
                        </label>
                    </div>
                    <div class="scanner-controls">
                        <button id="take-photo-btn" class="btn btn-primary">üì∑ <span data-translate="scanner.take_photo">–ó—Ä–æ–±–∏—Ç–∏ —Ñ–æ—Ç–æ</span></button>
                        <button id="toggle-camera" class="btn btn-secondary">üîÑ <span data-translate="scanner.switch_camera">–ü–µ—Ä–µ–º–∫–Ω—É—Ç–∏ –∫–∞–º–µ—Ä—É</span></button>
                        <button id="toggle-flash" class="btn btn-secondary">üí° <span data-translate="scanner.flash">–°–ø–∞–ª–∞—Ö</span></button>
                    </div>
                    <div class="manual-input">
                        <button id="manual-input-btn" class="btn btn-outline">‚å®Ô∏è <span data-translate="scanner.manual_input">–í–≤–µ—Å—Ç–∏ –≤—Ä—É—á–Ω—É</span></button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Card View Modal -->
        <div id="card-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="card-modal-title" data-translate="card_modal.title">–ö–∞—Ä—Ç–∫–∞</h3>
                    <button id="close-card-modal" class="btn-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="card-display">
                        <div id="card-code-display"></div>
                        <p id="card-code-number"></p>
                    </div>
                    <div class="card-actions">
                        <button id="delete-card" class="btn btn-danger">üóëÔ∏è <span data-translate="card_modal.delete">–í–∏–¥–∞–ª–∏—Ç–∏</span></button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 2FA Login Modal -->
        <div id="twofa-login-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 data-translate="twofa.login_title">–î–≤–æ—Ñ–∞–∫—Ç–æ—Ä–Ω–∞ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è</h3>
                </div>
                <div class="modal-body">
                    <p data-translate="twofa.enter_code">–í–≤–µ–¥—ñ—Ç—å –∫–æ–¥ –∑ –¥–æ–¥–∞—Ç–∫—É –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∞:</p>
                    <form id="twofa-login-form">
                        <div class="form-group">
                            <input type="text" id="twofa-token" class="twofa-input" maxlength="6" placeholder="000000" required>
                        </div>
                        <div class="form-actions">
                            <button type="button" id="cancel-twofa-login" class="btn btn-secondary" data-translate="common.cancel">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                            <button type="submit" class="btn btn-primary" data-translate="twofa.verify">–ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Security Settings Modal -->
        <div id="security-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 data-translate="security.title">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏</h3>
                    <button id="close-security-modal" class="btn-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="security-section">
                        <h4 data-translate="security.twofa_section">–î–≤–æ—Ñ–∞–∫—Ç–æ—Ä–Ω–∞ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è (2FA)</h4>
                        <p data-translate="security.twofa_description">–î–æ–¥–∞–π—Ç–µ –¥–æ–¥–∞—Ç–∫–æ–≤–∏–π —Ä—ñ–≤–µ–Ω—å –∑–∞—Ö–∏—Å—Ç—É –¥–ª—è –≤–∞—à–æ–≥–æ –∞–∫–∞—É–Ω—Ç—É</p>
                        
                        <div id="twofa-disabled" class="twofa-status" style="display: none;">
                            <div class="status-badge status-disabled">
                                <span data-translate="security.twofa_disabled">2FA –≤–∏–º–∫–Ω–µ–Ω–∞</span>
                            </div>
                            <button id="setup-twofa-btn" class="btn btn-primary" data-translate="security.enable_twofa">–£–≤—ñ–º–∫–Ω—É—Ç–∏ 2FA</button>
                        </div>

                        <div id="twofa-enabled" class="twofa-status" style="display: none;">
                            <div class="status-badge status-enabled">
                                <span data-translate="security.twofa_enabled">2FA —É–≤—ñ–º–∫–Ω–µ–Ω–∞</span>
                            </div>
                            <button id="disable-twofa-btn" class="btn btn-danger" data-translate="security.disable_twofa">–í–∏–º–∫–Ω—É—Ç–∏ 2FA</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 2FA Setup Modal -->
        <div id="twofa-setup-modal" class="modal" style="display: none;">
            <div class="modal-content modal-large">
                <div class="modal-header">
                    <h3 data-translate="security.setup_twofa">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è 2FA</h3>
                    <button id="close-twofa-setup" class="btn-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="setup-step">
                        <h4 data-translate="security.step1">–ö—Ä–æ–∫ 1: –°–∫–∞–Ω—É–π—Ç–µ QR-–∫–æ–¥</h4>
                        <p data-translate="security.scan_instructions">–°–∫–∞–Ω—É–π—Ç–µ —Ü–µ–π QR-–∫–æ–¥ —É –≤–∞—à–æ–º—É –¥–æ–¥–∞—Ç–∫—É –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∞ (Google Authenticator, Authy —Ç–æ—â–æ):</p>
                        <div class="qr-container">
                            <div id="qr-code-display"></div>
                        </div>
                        <div class="manual-entry">
                            <p data-translate="security.manual_entry">–ê–±–æ –≤–≤–µ–¥—ñ—Ç—å –∫–æ–¥ –≤—Ä—É—á–Ω—É:</p>
                            <code id="manual-entry-key"></code>
                            <button id="copy-key" class="btn btn-small" data-translate="common.copy">–ö–æ–ø—ñ—é–≤–∞—Ç–∏</button>
                        </div>
                    </div>
                    
                    <div class="setup-step">
                        <h4 data-translate="security.step2">–ö—Ä–æ–∫ 2: –í–≤–µ–¥—ñ—Ç—å –∫–æ–¥ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è</h4>
                        <p data-translate="security.verify_instructions">–í–≤–µ–¥—ñ—Ç—å 6-–∑–Ω–∞—á–Ω–∏–π –∫–æ–¥ –∑ –≤–∞—à–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É:</p>
                        <form id="twofa-setup-form">
                            <div class="form-group">
                                <input type="text" id="twofa-verify-token" class="twofa-input" maxlength="6" placeholder="000000" required>
                            </div>
                            <div class="form-actions">
                                <button type="button" id="cancel-twofa-setup" class="btn btn-secondary" data-translate="common.cancel">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                                <button type="submit" class="btn btn-primary" data-translate="security.complete_setup">–ó–∞–≤–µ—Ä—à–∏—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- 2FA Disable Modal -->
        <div id="twofa-disable-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 data-translate="security.disable_twofa_title">–í–∏–º–∫–Ω—É—Ç–∏ 2FA</h3>
                    <button id="close-twofa-disable" class="btn-close">&times;</button>
                </div>
                <div class="modal-body">
                    <p data-translate="security.disable_warning">–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–º–∫–Ω—É—Ç–∏ –¥–≤–æ—Ñ–∞–∫—Ç–æ—Ä–Ω—É –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é? –¶–µ –∑–Ω–∏–∑–∏—Ç—å –±–µ–∑–ø–µ–∫—É –≤–∞—à–æ–≥–æ –∞–∫–∞—É–Ω—Ç—É.</p>
                    <form id="twofa-disable-form">
                        <div class="form-group">
                            <label for="disable-password" data-translate="common.password">–ü–æ—Ç–æ—á–Ω–∏–π –ø–∞—Ä–æ–ª—å:</label>
                            <input type="password" id="disable-password" required>
                        </div>
                        <div class="form-group">
                            <label for="disable-twofa-token" data-translate="security.current_code">–ü–æ—Ç–æ—á–Ω–∏–π –∫–æ–¥ 2FA:</label>
                            <input type="text" id="disable-twofa-token" class="twofa-input" maxlength="6" placeholder="000000" required>
                        </div>
                        <div class="form-actions">
                            <button type="button" id="cancel-twofa-disable" class="btn btn-secondary" data-translate="common.cancel">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                            <button type="submit" class="btn btn-danger" data-translate="security.confirm_disable">–ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ –≤–∏–º–∫–Ω–µ–Ω–Ω—è</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Shopping Lists Page -->
        <div id="shopping-page" class="page" style="display: none;">
            <div class="container">
                <div class="page-header">
                    <h2 data-translate="shopping.my_lists">–ú–æ—ó —Å–ø–∏—Å–∫–∏ –ø–æ–∫—É–ø–æ–∫</h2>
                    <div class="header-actions">
                        <button id="add-shopping-list-btn" class="btn btn-primary">
                            ‚ûï <span data-translate="shopping.add_list">–ù–æ–≤–∏–π —Å–ø–∏—Å–æ–∫</span>
                        </button>
                    </div>
                </div>

                <!-- Search -->
                <div class="search-container">
                    <input type="text" id="search-lists" data-translate-placeholder="shopping.search" placeholder="–ü–æ—à—É–∫ —Å–ø–∏—Å–∫—ñ–≤..." class="search-input">
                </div>

                <!-- Shopping Lists Grid -->
                <div id="shopping-lists-grid" class="shopping-lists-grid">
                    <!-- Lists will be dynamically loaded here -->
                </div>

                <!-- Empty State -->
                <div id="shopping-empty-state" class="empty-state" style="display: none;">
                    <div class="empty-icon">üõí</div>
                    <h3 data-translate="shopping.no_lists">–ù–µ–º–∞—î —Å–ø–∏—Å–∫—ñ–≤ –ø–æ–∫—É–ø–æ–∫</h3>
                    <p data-translate="shopping.add_first_list">–°—Ç–≤–æ—Ä—ñ—Ç—å —Å–≤—ñ–π –ø–µ—Ä—à–∏–π —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫</p>
                    <button class="btn btn-primary" id="add-shopping-list-btn-inline" data-translate="shopping.add_list">–ù–æ–≤–∏–π —Å–ø–∏—Å–æ–∫</button>
                </div>
            </div>
        </div>

        <!-- Add Shopping List Page -->
        <div id="add-shopping-list-page" class="page" style="display: none;">
            <div class="container">
                <div class="page-header">
                    <button id="back-to-shopping" class="btn-back">‚Üê <span data-translate="common.back">–ù–∞–∑–∞–¥</span></button>
                    <h2 data-translate="shopping.add_list_title">–ù–æ–≤–∏–π —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫</h2>
                </div>

                <form id="add-shopping-list-form">
                    <div class="form-group">
                        <label for="list-name" data-translate="shopping.list_name">–ù–∞–∑–≤–∞ —Å–ø–∏—Å–∫—É</label>
                        <input type="text" id="list-name" name="name" required maxlength="100" 
                               data-translate-placeholder="shopping.list_name_placeholder" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: –¢–∏–∂–Ω–µ–≤—ñ –ø–æ–∫—É–ø–∫–∏">
                    </div>

                    <div class="form-group">
                        <label for="list-description" data-translate="shopping.list_description">–û–ø–∏—Å (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)</label>
                        <textarea id="list-description" name="description" rows="3" maxlength="500" 
                                  data-translate-placeholder="shopping.list_description_placeholder" placeholder="–ö–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å —Å–ø–∏—Å–∫—É..."></textarea>
                    </div>

                    <div class="form-group">
                        <label for="list-budget" data-translate="shopping.list_budget">–ë—é–¥–∂–µ—Ç (–≥—Ä–Ω, –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)</label>
                        <input type="number" id="list-budget" name="budget" min="0" step="0.01" 
                               data-translate-placeholder="shopping.list_budget_placeholder" placeholder="0.00">
                    </div>

                    <div class="form-group">
                        <label for="list-color" data-translate="shopping.list_color">–ö–æ–ª—ñ—Ä</label>
                        <div class="color-picker">
                            <input type="color" id="list-color" name="color" value="#10B981">
                            <div class="color-preview" style="background-color: #10B981;"></div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" id="cancel-shopping-list-btn" class="btn btn-secondary" data-translate="common.cancel">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                        <button type="submit" class="btn btn-primary" data-translate="shopping.create_list">–°—Ç–≤–æ—Ä–∏—Ç–∏ —Å–ø–∏—Å–æ–∫</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Shopping List Detail Page -->
        <div id="shopping-list-detail-page" class="page" style="display: none;">
            <div class="container">
                <div class="page-header">
                    <button id="back-to-shopping-lists" class="btn-back">‚Üê <span data-translate="common.back">–ù–∞–∑–∞–¥</span></button>
                    <h2 id="list-detail-title">–°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫</h2>
                    <div class="header-actions">
                        <button id="share-list-btn" class="btn btn-info">
                            üì§ <span data-translate="shopping.share_list">–ü–æ–¥—ñ–ª–∏—Ç–∏—Å—è</span>
                        </button>
                        <button id="edit-list-btn" class="btn btn-secondary">
                            ‚úèÔ∏è <span data-translate="common.edit">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</span>
                        </button>
                        <button id="delete-list-btn" class="btn btn-danger">
                            üóëÔ∏è <span data-translate="common.delete">–í–∏–¥–∞–ª–∏—Ç–∏</span>
                        </button>
                    </div>
                </div>

                <!-- List Stats -->
                <div class="list-stats">
                    <div class="stat-item">
                        <span class="stat-label" data-translate="shopping.total_items">–í—Å—å–æ–≥–æ —Ç–æ–≤–∞—Ä—ñ–≤:</span>
                        <span id="total-items-count" class="stat-value">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label" data-translate="shopping.completed_items">–ö—É–ø–ª–µ–Ω–æ:</span>
                        <span id="completed-items-count" class="stat-value">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label" data-translate="shopping.total_budget">–ë—é–¥–∂–µ—Ç:</span>
                        <span id="list-budget-display" class="stat-value">--</span>
                    </div>
                </div>

                <!-- Add Item Form -->
                <div class="add-item-form">
                    <h3 data-translate="shopping.add_item">–î–æ–¥–∞—Ç–∏ —Ç–æ–≤–∞—Ä</h3>
                    <form id="add-item-form">
                        <div class="form-row">
                            <div class="form-group flex-1">
                                <input type="text" id="item-name" name="name" required maxlength="100" 
                                       data-translate-placeholder="shopping.item_name_placeholder" placeholder="–ù–∞–∑–≤–∞ —Ç–æ–≤–∞—Ä—É">
                            </div>
                            <div class="form-group">
                                <input type="text" id="item-quantity" name="quantity" maxlength="20" 
                                       data-translate-placeholder="shopping.quantity_placeholder" placeholder="1 –∫–≥" value="1">
                            </div>
                            <div class="form-group">
                                <select id="item-category" name="category">
                                    <option value="–Ü–Ω—à–µ">–Ü–Ω—à–µ</option>
                                    <option value="–ú'—è—Å–æ —ñ —Ä–∏–±–∞">–ú'—è—Å–æ —ñ —Ä–∏–±–∞</option>
                                    <option value="–ú–æ–ª–æ—á–Ω—ñ –ø—Ä–æ–¥—É–∫—Ç–∏">–ú–æ–ª–æ—á–Ω—ñ –ø—Ä–æ–¥—É–∫—Ç–∏</option>
                                    <option value="–§—Ä—É–∫—Ç–∏ —ñ –æ–≤–æ—á—ñ">–§—Ä—É–∫—Ç–∏ —ñ –æ–≤–æ—á—ñ</option>
                                    <option value="–•–ª—ñ–± —ñ –≤–∏–ø—ñ—á–∫–∞">–•–ª—ñ–± —ñ –≤–∏–ø—ñ—á–∫–∞</option>
                                    <option value="–ö—Ä—É–ø–∏ —ñ –º–∞–∫–∞—Ä–æ–Ω–∏">–ö—Ä—É–ø–∏ —ñ –º–∞–∫–∞—Ä–æ–Ω–∏</option>
                                    <option value="–ù–∞–ø–æ—ó">–ù–∞–ø–æ—ó</option>
                                    <option value="–ü–æ–±—É—Ç–æ–≤–∞ —Ö—ñ–º—ñ—è">–ü–æ–±—É—Ç–æ–≤–∞ —Ö—ñ–º—ñ—è</option>
                                    <option value="–û—Å–æ–±–∏—Å—Ç–∞ –≥—ñ–≥—ñ—î–Ω–∞">–û—Å–æ–±–∏—Å—Ç–∞ –≥—ñ–≥—ñ—î–Ω–∞</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <input type="number" id="item-price" name="price" min="0" step="0.01" 
                                       data-translate-placeholder="shopping.price_placeholder" placeholder="–¶—ñ–Ω–∞ (–≥—Ä–Ω)">
                            </div>
                            <button type="submit" class="btn btn-primary">+</button>
                        </div>
                    </form>
                </div>

                <!-- Shopping Items -->
                <div id="shopping-items-container" class="shopping-items">
                    <!-- Items will be loaded here -->
                </div>

                <!-- Share List Modal -->
                <div id="share-list-modal" class="modal" style="display: none;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 data-translate="shopping.share_with_friends">–ü–æ–¥—ñ–ª–∏—Ç–∏—Å—è –∑ –¥—Ä—É–∑—è–º–∏</h3>
                            <button class="btn-close">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div id="friends-to-share" class="friends-to-share">
                                <!-- Friends list will be loaded here -->
                            </div>
                            <div class="share-permissions">
                                <label data-translate="shopping.permission_label">–î–æ–∑–≤—ñ–ª:</label>
                                <select id="share-permission">
                                    <option value="view" data-translate="shopping.permission_view">–¢—ñ–ª—å–∫–∏ –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏</option>
                                    <option value="edit" data-translate="shopping.permission_edit">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</option>
                                </select>
                            </div>
                            <div class="shared-with-list">
                                <h4 data-translate="shopping.already_shared_with">–í–∂–µ –ø–æ–¥—ñ–ª–µ–Ω–æ –∑:</h4>
                                <div id="current-shares">
                                    <!-- Current shares will be shown here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Friends Page -->
        <div id="friends-page" class="page" style="display: none;">
            <div class="container">
                <div class="page-header">
                    <h2 data-translate="friends.title">–î—Ä—É–∑—ñ</h2>
                    <button id="add-friend-btn" class="btn btn-primary">
                        <span>‚ûï</span>
                        <span data-translate="friends.add_friend">–î–æ–¥–∞—Ç–∏ –¥—Ä—É–≥–∞</span>
                    </button>
                </div>

                <!-- Friend Search Modal -->
                <div id="friend-search-modal" class="modal" style="display: none;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 data-translate="friends.search_title">–ü–æ—à—É–∫ –¥—Ä—É–≥–∞</h3>
                            <button class="btn-close">&times;</button>
                        </div>
                        <div class="modal-body">
                            <form id="friend-search-form">
                                <div class="form-group">
                                    <label for="friend-search-id" data-translate="friends.user_id_label">ID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</label>
                                    <input type="text" id="friend-search-id" required 
                                           data-translate-placeholder="friends.user_id_placeholder" placeholder="–í–≤–µ–¥—ñ—Ç—å ID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞">
                                </div>
                                <button type="submit" class="btn btn-primary" data-translate="friends.search_user">–ó–Ω–∞–π—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</button>
                            </form>
                            <div id="friend-search-result" style="display: none;">
                                <!-- Search result will be shown here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Friend Requests Section -->
                <div class="friends-section">
                    <h3 data-translate="friends.requests_title">–ó–∞–ø–∏—Ç–∏ –Ω–∞ –¥—Ä—É–∂–±—É</h3>
                    <div id="friend-requests-tabs" class="mini-tabs">
                        <button class="mini-tab-btn active" data-request-tab="received">
                            <span data-translate="friends.received_requests">–û—Ç—Ä–∏–º–∞–Ω—ñ</span>
                            <span id="received-count" class="badge">0</span>
                        </button>
                        <button class="mini-tab-btn" data-request-tab="sent">
                            <span data-translate="friends.sent_requests">–ù–∞–¥—ñ—Å–ª–∞–Ω—ñ</span>
                            <span id="sent-count" class="badge">0</span>
                        </button>
                    </div>
                    <div id="received-requests" class="request-list">
                        <!-- Received requests will be loaded here -->
                    </div>
                    <div id="sent-requests" class="request-list" style="display: none;">
                        <!-- Sent requests will be loaded here -->
                    </div>
                </div>

                <!-- Friends List Section -->
                <div class="friends-section">
                    <h3 data-translate="friends.my_friends">–ú–æ—ó –¥—Ä—É–∑—ñ</h3>
                    <div id="friends-search" class="search-container">
                        <input type="text" id="friends-search-input" class="search-input" 
                               data-translate-placeholder="friends.search_friends" placeholder="–ü–æ—à—É–∫ –¥—Ä—É–∑—ñ–≤...">
                        <span class="search-icon">üîç</span>
                    </div>
                    <div id="friends-list" class="friends-list">
                        <!-- Friends will be loaded here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile Page -->
        <div id="profile-page" class="page" style="display: none;">
            <div class="container">
                <div class="page-header">
                    <h2 data-translate="profile.title">–ü—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</h2>
                </div>

                <!-- User Info Card -->
                <div class="profile-card">
                    <div class="profile-header">
                        <div class="profile-avatar">
                            <span class="avatar-icon">üë§</span>
                        </div>
                        <div class="profile-info">
                            <h3 id="profile-display-name" class="profile-name">--</h3>
                            <p id="profile-display-email" class="profile-email">--</p>
                            <p class="profile-id">
                                <span data-translate="profile.user_id">ID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:</span> 
                                <span id="profile-display-id" class="user-id">--</span>
                                <button id="copy-user-id" class="btn-copy" title="–ö–æ–ø—ñ—é–≤–∞—Ç–∏ ID">üìã</button>
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Profile Settings -->
                <div class="profile-sections">
                    <!-- Change Name Section -->
                    <div class="profile-section">
                        <h4 data-translate="profile.change_name">–ó–º—ñ–Ω–∏—Ç–∏ —ñ–º'—è</h4>
                        <p data-translate="profile.change_name_desc">–û–Ω–æ–≤—ñ—Ç—å —Å–≤–æ—î –≤—ñ–¥–æ–±—Ä–∞–∂—É–≤–∞–Ω–µ —ñ–º'—è</p>
                        <form id="change-name-form" class="profile-form">
                            <div class="form-group">
                                <label for="new-name" data-translate="profile.new_name">–ù–æ–≤–µ —ñ–º'—è</label>
                                <input type="text" id="new-name" name="name" required maxlength="50" 
                                       data-translate-placeholder="profile.new_name_placeholder" placeholder="–í–≤–µ–¥—ñ—Ç—å –≤–∞—à–µ —ñ–º'—è">
                            </div>
                            <button type="submit" class="btn btn-primary" data-translate="profile.update_name">–û–Ω–æ–≤–∏—Ç–∏ —ñ–º'—è</button>
                        </form>
                    </div>

                    <!-- Change Password Section -->
                    <div class="profile-section">
                        <h4 data-translate="profile.change_password">–ó–º—ñ–Ω–∏—Ç–∏ –ø–∞—Ä–æ–ª—å</h4>
                        <p data-translate="profile.change_password_desc">–û–Ω–æ–≤—ñ—Ç—å –ø–∞—Ä–æ–ª—å –¥–ª—è –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏</p>
                        <form id="change-password-form" class="profile-form">
                            <div class="form-group">
                                <label for="current-password" data-translate="profile.current_password">–ü–æ—Ç–æ—á–Ω–∏–π –ø–∞—Ä–æ–ª—å</label>
                                <input type="password" id="current-password" name="currentPassword" required>
                            </div>
                            <div class="form-group">
                                <label for="new-password" data-translate="profile.new_password">–ù–æ–≤–∏–π –ø–∞—Ä–æ–ª—å</label>
                                <input type="password" id="new-password" name="newPassword" required minlength="6">
                            </div>
                            <div class="form-group">
                                <label for="confirm-new-password" data-translate="profile.confirm_new_password">–ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ –Ω–æ–≤–∏–π –ø–∞—Ä–æ–ª—å</label>
                                <input type="password" id="confirm-new-password" name="confirmNewPassword" required minlength="6">
                            </div>
                            <button type="submit" class="btn btn-primary" data-translate="profile.update_password">–û–Ω–æ–≤–∏—Ç–∏ –ø–∞—Ä–æ–ª—å</button>
                        </form>
                    </div>

                    <!-- Account Stats Section -->
                    <div class="profile-section">
                        <h4 data-translate="profile.account_stats">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–∫–∞—É–Ω—Ç—É</h4>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon">üí≥</div>
                                <div class="stat-info">
                                    <span class="stat-number" id="total-cards-count">0</span>
                                    <span class="stat-label" data-translate="profile.total_cards">–í—Å—å–æ–≥–æ –∫–∞—Ä—Ç</span>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üõí</div>
                                <div class="stat-info">
                                    <span class="stat-number" id="total-lists-count">0</span>
                                    <span class="stat-label" data-translate="profile.total_lists">–í—Å—å–æ–≥–æ —Å–ø–∏—Å–∫—ñ–≤</span>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üìÖ</div>
                                <div class="stat-info">
                                    <span class="stat-number" id="account-age">0</span>
                                    <span class="stat-label" data-translate="profile.account_age">–î–Ω—ñ–≤ –∑ –Ω–∞–º–∏</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Security Section -->
                    <div class="profile-section">
                        <h4 data-translate="profile.security">–ë–µ–∑–ø–µ–∫–∞</h4>
                        <div class="security-actions">
                            <button id="profile-security-btn" class="btn btn-secondary">
                                üõ°Ô∏è <span data-translate="profile.manage_2fa">–ö–µ—Ä—É–≤–∞—Ç–∏ 2FA</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notification -->
        <div id="notification" class="notification" style="display: none;">
            <div class="notification-content">
                <span id="notification-message"></span>
                <button id="close-notification" class="btn-close">&times;</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="/script.js?v=10"></script>
</body>
</html>